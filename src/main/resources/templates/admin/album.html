<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>后台管理</title>
    <link rel="stylesheet" type="text/css"
          th:href="@{/lib/layui/css/layui.css}">
    <link rel="stylesheet" href="easyeditor/css/easyeditor.css"
          th:href="@{/lib/easyeditor/css/easyeditor.css}">
    <link rel="stylesheet" type="text/css"
          th:href="@{/css/font_1531710_xb357ub1wmg.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/main.css}">
    <!--加载meta IE兼容文件--
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body class="lay-blog">
<!--导航栏-->
<div class="header">
    <div class="header-wrap ">
        <div class="layui-row">
            <div class="layui-col-md12" align="center">
                <ul class="layui-nav  " lay-filter=""
                    style="padding-top: 10px; padding-bottom: 10px; background-color: #000000">
                    <li class="layui-nav-item  "><a th:href="@{/admin/blogs}"
                                                    class="my-text-nav" style="color: #05de1b">后台管理</a></li>
                    <li class="layui-nav-item  "><a th:href="@{/admin/blogs}"
                                                    class="my-text"><i class="layui-icon layui-icon-home "
                                                                       style="padding-right: 3px"></i>博客管理</a></li>


                    <li class="layui-nav-item "><a th:href="@{/admin/tags}"
                                                   class="my-text"><i class="layui-icon layui-icon-note"></i> 标签管理</a>
                    </li>

                    <li class="layui-nav-item layui-this"><a th:href="@{/admin/album}"
                                                             class="my-text"><i class="layui-icon layui-icon-picture"
                                                                                style="padding-right: 3px"></i>相册管理</a>
                    </li>
                    <li class="layui-nav-item "><a th:href="@{/admin/gallery}"
                                                   class="my-text"><i class="layui-icon layui-icon-picture"
                                                                      style="padding-right: 3px"></i>图床管理</a></li>

                    <li class="layui-nav-item pull-right"><a class="my-text"><img
                            th:src="${session.avatar}"
                            class="layui-nav-img">
                        <span th:text="${session.username}"></span>
                    </a>
                        <dl class="layui-nav-child">

                            <dd>
                                <a th:href="@{/admin/logout}">注销</a>
                            </dd>
                        </dl>
                    </li>


                </ul>
            </div>
        </div>
    </div>
</div>
<!-- 中间内容 -->


<div class="layui-fluid">

    <div class="layui-row">
        <div class="layui-col-md2 " style="opacity: 0">1</div>
        <div class="layui-col-md8" style="padding: 0 0px 10px 0px">
            <div class="layui-card">
                <div class="layui-card-body">
						<span class="layui-breadcrumb"> 
						<a th:href="@{/admin/album}" style="font-size: 16px">列表</a>
							<a th:href="@{/admin/album-input}" style="font-size: 16px">新增</a>
						</span>
                    <!-- 搜索框 -->
                    <div class="layui-card ">
                        <div class="layui-card-body">
                            <!--th:action="@{/admin/album/search}" method="post"-->
                            <form class="layui-form" th:action="@{/admin/album/search}" method="post">
                                <input type="hidden" name="pageInfo">
                                <div class="layui-form-item layui-inline">
                                    <div>
                                        <label class="layui-form-label">日期范围</label>
                                        <div class="layui-input-inline">
                                            <input type="text" class="layui-input" id="test6"
                                                   placeholder="  " name="date" th:value="${date}"
                                                   th:text="${date}">
                                        </div>
                                    </div>
                                </div>


                                <div class="layui-form-item layui-inline">
                                    <div class="layui-input-block">
                                        <button class="layui-btn" id="search-btn">
                                            <i class="layui-icon layui-icon-search"></i> 搜索
                                        </button>

                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- 表格区域 -->
                    <div class="layui-row">
                        <div class="layui-col-md12">
                            <div class="layui-card ">
                                <div class="layui-card-body" id="table-container">
                                    <table class="layui-table">
                                        <colgroup>
                                            <col width="15">
                                            <col width="200">
                                            <col width="200">
                                            <col width="320">
                                            <col width="200">
                                            <col width="100">
                                        </colgroup>
                                        <thead>
                                        <tr>
                                            <th>id</th>
                                            <th>图片名</th>
                                            <th>更新时间</th>
                                            <th>地址</th>
                                            <th>预览</th>
                                            <th>操作</th>
                                        </tr>
                                        </thead>
                                        <tbody  id="layer-photos-demo">


                                        <tr th:each="album:${pageInfo.list}">
                                            <th th:text="${album.getId()}">个人博客系统</th>
                                            <td th:text="${album.imgName}">个人博客系统</td>


                                            <td th:text="${#dates.format(album.uploadDate,'yyyy-MM-dd HH:mm:ss')}" }
                                            >2016-11-28
                                            </td>
                                            <!--  <td th:text="${galleryList.uploadDate}" }
                                              >2016-11-28
                                              </td>-->

                                            <td th:text="${album.path}">https://588ku.com/ycpng/11631023.html</td>
                                            <th><img th:src="${album.path}" class="gallery"></th>
                                            <th><a
                                                    class="layui-btn layui-btn-sm layui-btn-danger"
                                                    th:href="@{/admin/album/{id}/delete(id=${album.id})}"
                                                    onclick="return confirm('您确定要删除吗？')">删除</a></th>
                                        </tr>

                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <th colspan="6" th:if="${pageInfo.pages}>1">
                                                <div class="layui-btn-group" style="padding-left: 50px">

                                                    <a th:href="@{/admin/album}">
                                                        <button type="button" class="layui-btn layui-btn-primary"
                                                                style="color: #6f9">首页
                                                        </button>
                                                    </a>
                                                    <a th:href="@{/admin/album(pageNum=${pageInfo.hasPreviousPage}?${pageInfo.prePage}:1)}">
                                                        <button type="button" class="layui-btn layui-btn-primary"
                                                                style="color: #6f9">上一页
                                                        </button>
                                                    </a>
                                                    <a th:href="@{/admin/album(pageNum=${pageInfo.hasNextPage}?${pageInfo.nextPage}:${pageInfo.pages})}">
                                                        <button type="button" class="layui-btn layui-btn-primary"
                                                                style="color: #6f9">下一页
                                                        </button>
                                                    </a>


                                                    <a th:href="@{/admin/album(pageNum=${pageInfo.pages})}">
                                                        <button type="button" class="layui-btn layui-btn-primary"
                                                                style="color: #6f9">尾页
                                                        </button>
                                                    </a>
                                                </div>
                                                <span> <p>当前第<span th:text="${pageInfo.pageNum}"></span>页，总<span
                                                        th:text="${pageInfo.pages}"></span>页，共<span
                                                        th:text="${pageInfo.total}"></span>条记录</p></span>

                                            </th>

                                        </tr>

                                        </tfoot>
                                    </table>
                                </div>
                            </div>

                            <!--新增页面 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-md2 " style="opacity: 0">1</div>
    </div>

</div>
<br>
<br>
<br>
<br>
<br>


<!-- footer -->
<div class="footer" style="background-color: #000000">
    <p>
        <span>&copy; 2020</span> <span><a href="http://127.0.0.1:8080"
                                          target="_blank">tiankong44</a></span> <span>hello world</span>
    </p>
    <p>
        <span>人生就是一场修行</span>
    </p>
</div>
<script src="easyeditor/js/marked.min.js"
        th:src="@{/lib/easyeditor/js/marked.min.js}" type="text/javascript"
        charset="utf-8"></script>
<script type="text/javascript" src="../static/lib/layui/layui.js"
        th:src="@{/lib/layui/layui.js}"></script>

<script>
    layui
        .config({
            base: '/lib/easyeditor/mods/' //存放layui拓展模块的目录位置
        })
        .extend({
            easyeditor: 'easyeditor'
        })
        .use(
            ['element', 'carousel', 'layer', 'util',
                'laydate', 'jquery'],
            function () {
                var element = layui.element;
                var carousel = layui.carousel;
                var layer = layui.layer;
                var laydate = layui.laydate;
                var util = layui.util;
                var $ = layui.jquery;

                // function pageInfo(obj) {
                //     $("[name='pageInfo']").val($(obj).data("pageInfo"));
                //     loaddata();
                // }
                //
                // $("#search-btn").click(function () {
                //     loaddata();
                // })
                // $("#next").onclick(function () {
                //     loaddata();
                // })
                layer.photos({
                    photos: '#layer-photos-demo',
                    anim: 5
                    //0-6的选择，指定弹出图片动画类型，默认随机（请注意，3.0之前的版本用shift参数）

                });

                //Ajax
                // function loaddata() {
                //     $("#table-container").load(/*[[@{/admin/album/search}]]*/"/admin/album/search", {
                //
                //         date: $("[name='date']").val(),
                //         pageInfo: $("[name='pageInfo']").val(),
                //
                //     });
                //
                // }


                //laydate
                laydate.render({
                    elem: '#test6',
                    range: true
                });

                element.on('nav(demo)', function (elem) {
                    //console.log(elem)
                    layer.msg(elem.text());
                });

                util
                    .fixbar({

                    });
            });
</script>
</body>
</html>